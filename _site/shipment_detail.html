<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>è¿å•è¯¦æƒ…</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <nav>
  
    <a href="/">é¦–é¡µ</a>
  
    <a href="/about.html">å…³äº</a>
  
    <a href="/query.html">è®¢å•æŸ¥è¯¢</a>
  
    <a href="/shipments.html">è¿å•åˆ—è¡¨</a>
  
    <a href="/add_shipment.html">æ·»åŠ è¿å•</a>
  
    <a href="/staff.html">å›¢é˜Ÿ</a>
  
</nav>
    <div class="shipment-detail-page">
  <h1>è¿å•è¯¦æƒ… / Shipment Details</h1>
  
  <div class="detail-container">
    <div id="shipmentDetail" class="detail-card">
      <div class="loader">
        <div class="spinner"></div>
        <p>åŠ è½½è¿å•è¯¦æƒ…...</p>
      </div>
    </div>
  </div>
  
  <div class="actions">
    <a href="/shipments.html" class="btn-back">è¿”å›åˆ—è¡¨ / Back to List</a>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get tracking number from URL
    const params = new URLSearchParams(window.location.search);
    const trackingNumber = params.get('tracking');
    
    if (!trackingNumber) {
      document.getElementById('shipmentDetail').innerHTML = '<div class="error">æœªæä¾›è¿å•å· / No tracking number provided</div>';
      return;
    }
    
    // In a real application, this would be a server request
    // For this demo, we'll use JavaScript to find the shipment in our data
    
    // This is a simulation - in a real Jekyll site, we'd use Liquid templates
    // to directly render the specific shipment data
    const shipments = [
      
      {
        tracking_number: "NTS-2304_ELECT_50_20250507T093000",
        client_code: "NTS-2304",
        transport_mode: "Sea",
        status: "å·²å‘è´§",
        goods_description: "Electronic components, model XC-2304",
        package_count: 50,
        estimated_days: 30,
        created_at: "2025-05-07 09:30:00 +0000",
        shipped_date: "2025-05-08",
        estimated_arrival: "2025-06-07",
        arrival_date: "",
        pickup_date: ""
      },
      
      {
        tracking_number: "ABC-1234_TECH_25_20250505T143000",
        client_code: "ABC-1234",
        transport_mode: "Air",
        status: "æœªå‘è´§",
        goods_description: "Computer peripherals",
        package_count: 25,
        estimated_days: 7,
        created_at: "2025-05-05 14:30:00 +0000",
        shipped_date: "",
        estimated_arrival: "2025-05-12",
        arrival_date: "",
        pickup_date: ""
      },
      
      {
        tracking_number: "XYZ-5678_FURN_10_20250502T110000",
        client_code: "XYZ-5678",
        transport_mode: "Sea",
        status: "å·²åˆ°è¾¾",
        goods_description: "Office furniture",
        package_count: 10,
        estimated_days: 25,
        created_at: "2025-05-02 11:00:00 +0000",
        shipped_date: "2025-05-03",
        estimated_arrival: "2025-05-28",
        arrival_date: "2025-05-28",
        pickup_date: ""
      },
      
      {
        tracking_number: "NTS-2304_CLOTH_30_20250420T082000",
        client_code: "NTS-2304",
        transport_mode: "Sea",
        status: "å·²æè´§",
        goods_description: "Textile products, winter collection",
        package_count: 30,
        estimated_days: 30,
        created_at: "2025-04-20 08:20:00 +0000",
        shipped_date: "2025-04-21",
        estimated_arrival: "2025-05-21",
        arrival_date: "2025-05-20",
        pickup_date: "2025-05-22"
      }
      
    ];
    
    const clients = [
      
      {
        code: "NTS-2304",
        name: "Ruixin",
        timezone_offset: "3",
        language: "ar",
        country: "SA",
        contact: "+966 551234567"
      },
      
      {
        code: "ABC-1234",
        name: "TechGlobal",
        timezone_offset: "1",
        language: "en",
        country: "UK",
        contact: "+44 7712345678"
      },
      
      {
        code: "XYZ-5678",
        name: "EuroTrade",
        timezone_offset: "2",
        language: "de",
        country: "DE",
        contact: "+49 1761234567"
      }
      
    ];
    
    // Find the shipment
    const shipment = shipments.find(s => s.tracking_number === trackingNumber);
    
    if (!shipment) {
      document.getElementById('shipmentDetail').innerHTML = '<div class="error">æœªæ‰¾åˆ°è¿å• / Shipment not found</div>';
      return;
    }
    
    // Find the client
    const client = clients.find(c => c.code === shipment.client_code);
    
    if (!client) {
      document.getElementById('shipmentDetail').innerHTML = '<div class="error">æœªæ‰¾åˆ°å®¢æˆ·ä¿¡æ¯ / Client information not found</div>';
      return;
    }
    
    // Format dates
    function formatDate(dateString) {
      if (!dateString) return 'N/A';
      const date = new Date(dateString);
      return date.toLocaleDateString('zh-CN', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit'
      }).replace(/\//g, 'å¹´').replace(/\//g, 'æœˆ') + 'æ—¥';
    }
    
    // Determine status text and icon
    let statusText, statusIcon;
    switch(shipment.status) {
      case 'æœªå‘è´§':
        statusText = 'ç­‰å¾…å‘è´§ / Pending';
        statusIcon = 'ğŸŸ¡';
        break;
      case 'å·²å‘è´§':
        statusText = 'è¿è¾“ä¸­ / In Transit';
        statusIcon = 'ğŸš¢';
        break;
      case 'å·²åˆ°è¾¾':
        statusText = 'æŠµè¾¾ç›®çš„æ¸¯ / Arrived';
        statusIcon = 'âœ…';
        break;
      case 'å·²æè´§':
        statusText = 'å·²æè´§ / Picked Up';
        statusIcon = 'ğŸ“¦';
        break;
      default:
        statusText = 'æœªçŸ¥çŠ¶æ€ / Unknown';
        statusIcon = 'â“';
    }
    
    // Generate HTML
    const html = `
      <div class="detail-header">
        <h2>${shipment.tracking_number}</h2>
        <div class="status-badge status-${shipment.status}">${statusIcon} ${statusText}</div>
      </div>
      
      <div class="detail-sections">
        <div class="detail-section">
          <h3>å®¢æˆ·ä¿¡æ¯ / Client Information</h3>
          <div class="detail-row">
            <span class="label">å®¢æˆ·åç§° / Name:</span>
            <span class="value">${client.name}</span>
          </div>
          <div class="detail-row">
            <span class="label">å›½å®¶ / Country:</span>
            <span class="value">${client.country}</span>
          </div>
          <div class="detail-row">
            <span class="label">è”ç³»æ–¹å¼ / Contact:</span>
            <span class="value">${client.contact}</span>
          </div>
          <div class="detail-row">
            <span class="label">è¯­è¨€ / Language:</span>
            <span class="value">${client.language}</span>
          </div>
          <div class="detail-row">
            <span class="label">æ—¶åŒº / Timezone:</span>
            <span class="value">UTC${client.timezone_offset}</span>
          </div>
        </div>
        
        <div class="detail-section">
          <h3>è´§ç‰©ä¿¡æ¯ / Shipment Information</h3>
          <div class="detail-row">
            <span class="label">è¿è¾“æ–¹å¼ / Mode:</span>
            <span class="value">${shipment.transport_mode}</span>
          </div>
          <div class="detail-row">
            <span class="label">åŒ…è£¹æ•°é‡ / Packages:</span>
            <span class="value">${shipment.package_count}</span>
          </div>
          <div class="detail-row">
            <span class="label">ä¼°è®¡è¿è¾“æ—¶é—´ / Est. Days:</span>
            <span class="value">${shipment.estimated_days} å¤© / days</span>
          </div>
          <div class="detail-row">
            <span class="label">è´§ç‰©æè¿° / Description:</span>
            <span class="value">${shipment.goods_description}</span>
          </div>
        </div>
        
        <div class="detail-section">
          <h3>æ—¶é—´ä¿¡æ¯ / Timeline</h3>
          <div class="detail-row">
            <span class="label">åˆ›å»ºæ—¶é—´ / Created:</span>
            <span class="value">${new Date(shipment.created_at).toLocaleString('zh-CN')}</span>
          </div>
          ${shipment.shipped_date ? `
          <div class="detail-row">
            <span class="label">å‘è´§æ—¥æœŸ / Shipped:</span>
            <span class="value">${formatDate(shipment.shipped_date)}</span>
          </div>
          ` : ''}
          <div class="detail-row">
            <span class="label">é¢„è®¡åˆ°è¾¾ / Est. Arrival:</span>
            <span class="value">${formatDate(shipment.estimated_arrival)}</span>
          </div>
          ${shipment.arrival_date ? `
          <div class="detail-row">
            <span class="label">å®é™…åˆ°è¾¾ / Arrival:</span>
            <span class="value">${formatDate(shipment.arrival_date)}</span>
          </div>
          ` : ''}
          ${shipment.pickup_date ? `
          <div class="detail-row">
            <span class="label">æè´§æ—¥æœŸ / Pickup:</span>
            <span class="value">${formatDate(shipment.pickup_date)}</span>
          </div>
          ` : ''}
        </div>
      </div>
      
      <div class="timeline">
        <div class="timeline-item ${shipment.status !== 'æœªå‘è´§' ? 'completed' : 'active'}">
          <div class="timeline-icon">ğŸ“</div>
          <div class="timeline-content">
            <h4>è®¢å•åˆ›å»º / Order Created</h4>
            <p>${new Date(shipment.created_at).toLocaleString('zh-CN')}</p>
          </div>
        </div>
        
        <div class="timeline-item ${shipment.status === 'æœªå‘è´§' ? 'pending' : shipment.status !== 'æœªå‘è´§' ? 'completed' : ''}">
          <div class="timeline-icon">ğŸšš</div>
          <div class="timeline-content">
            <h4>å‘è´§ / Shipped</h4>
            <p>${shipment.shipped_date ? formatDate(shipment.shipped_date) : 'ç­‰å¾…ä¸­ / Waiting'}</p>
          </div>
        </div>
        
        <div class="timeline-item ${shipment.status === 'å·²åˆ°è¾¾' || shipment.status === 'å·²æè´§' ? 'completed' : shipment.status === 'å·²å‘è´§' ? 'active' : 'pending'}">
          <div class="timeline-icon">ğŸ¢</div>
          <div class="timeline-content">
            <h4>åˆ°è¾¾ / Arrival</h4>
            <p>${shipment.arrival_date ? formatDate(shipment.arrival_date) : 'é¢„è®¡ / Est: ' + formatDate(shipment.estimated_arrival)}</p>
          </div>
        </div>
        
        <div class="timeline-item ${shipment.status === 'å·²æè´§' ? 'completed' : 'pending'}">
          <div class="timeline-icon">ğŸ“¦</div>
          <div class="timeline-content">
            <h4>æè´§ / Pickup</h4>
            <p>${shipment.pickup_date ? formatDate(shipment.pickup_date) : 'ç­‰å¾…ä¸­ / Waiting'}</p>
          </div>
        </div>
      </div>
    `;
    
    document.getElementById('shipmentDetail').innerHTML = html;
  });
</script>
  </body>
</html>